<%- include("includes/head"); %>
<%- include("partials/header"); %>

<div class="visits">
    <p class="mb-2 p-1 border-bottom">Cadastrar</p>
    <section class="bg-light p-3 rounded-3">
        <form action="/visits/add" method="POST" class="d-flex flex gap-2 gap-sm-3 flex-wrap">
            <div class="form-group col-xl-2 col-12">
                <select name="local" id="local" class="form-control">
                    <option value="Bento">Bento</option>
                    <option value="Protasio">Protasio</option>
                    <option value="Cavalhada">Cavalhada</option>
                    <option value="Azenha">Azenha</option>
                    <option value="Andradas">Andradas</option>
                    <option value="24 de Outubro">24 de Outubro</option>
                    <option value="Dr Flores">Dr Flores</option>
                    <option value="Zona Sul">Zona Sul</option>
                    <option value="Alvorda">Alvorda</option>
                    <option value="Viamão">Viamão</option>
                    <option value="Cachoeirinha">Cachoeirinha</option>
                    <option value="Gravatai Centro">Gravatai Centro</option>
                    <option value="Gravatai 67">Gravatai 67</option>
                    <option value="Canoas Centro">Canoas Centro</option>
                    <option value="Boqueirão">Boqueirão</option>
                    <option value="Mauricio Cardoso">Mauricio Cardoso</option>
                    <option value="Novo Hamburgo">Novo Hamburgo</option>
                    <option value="São Leopoldo">São Leopoldo</option>
                    <option value="Caxias Centro">Caxias Centro</option>
                    <option value="Caxias Shoppin">Caxias Shopping</option>
                    <option value="Menino Deus">Menino Deus</option>
                    <option value="Tri Esportes">Tri Esportes</option>
                    <option value="Orla">Orla</option>
                </select>
            </div>
            <div class="form-group col-xl-2 col-12">
                <input class="form-control" type="date" name="date">
            </div>
            <div class="form-group col-xl-2 col-12">
                <textarea class="form-control" name="resume" rows="1">Descreva a atividade</textarea>
            </div>
            <input type="submit" class="btn btn-primary ms-auto col-xl-2 col-12 mt-1 mt-sm-0" value="Registrar">
        </form>
    </section>
    <section class="bg-light p-3 rounded-2 mt-4">
        <p>Visitas técnicas</p>
        <table class="table table-striped table-hover">
            <thead class="bg-primary text-white">
                <tr>
                    <th scope="col">Unidade</th>
                    <th scope="col">Data</th>
                    <th scope="col">Resumo</th>
                    <th scope="col">Editar</th>
                </tr>
            </thead>
            <tbody>
                <% for(let visit of visits) { %>
                    <tr>
                        <% if(visit.done){ %>
                        <td class="visit done align-middle"><%= visit.local %></td>
                        <td class="visit done align-middle"><%= visit.date %></td>
                        <td class="visit done align-middle"><%= visit.resume %></td>
                        <% } else { %>
                        <td class="align-middle"><%= visit.local %></td>
                        <td class="align-middle"><%= visit.date %></td>
                        <td class="align-middle"><%= visit.resume %></td>
                        <% } %>
                        <td class="d-flex flex-direction-row gap-2 h-100">
                        <form action="/visits/updatestatus" method="POST">
                            <input type="hidden" name="id" value="<%= visit.id %>">
                            <input type="hidden" name="done" value="<%= visit.done %>">
                            <button type="submit" class="btn p-1"><a href=""><i class="bi bi-check2"></i></a></button>
                        </form>
                        <form action="/visits/remove" method="POST">
                            <input type="hidden" name="id" value="<%= visit.id %>">
                            <button type="submit" class="btn p-1"><a href=""><i class="bi bi-x"></i></a></button>
                        </form>
                        <a href="/visits/edit/<%= visit.id %>" class="btn p-1"><i class="bi bi-pen"></i></a></td>
                    </tr>
                    <% } %>
            </tbody>
        </table>
    </section>
</div>

<%- include("includes/footer"); %>